/**
 * μΉ΄μΉ΄μ¤ν†΅ λ©”μ‹μ§€ νΈλ¦¬κ±° μμ • μƒνƒ ν…μ¤νΈ μ¤ν¬λ¦½νΈ
 * λ¨λ“  kakao message.js νμΌμ΄ onChange β†’ onFormSubmitμΌλ΅ λ³€κ²½λμ—λ”μ§€ ν™•μΈ
 * μ‘μ„±μΌ: 2025-09-25
 */

// ν…μ¤νΈν•  νμΌ λ©λ΅κ³Ό μμƒ μƒνƒ
const ν…μ¤νΈνμΌλ©λ΅ = [
  {
    ν΄λ”: 'μ΄νΈ λ¶€μ¥λ‹',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'μ•„μ΄λ””μ–΄ν¬λ£¨ μ΄νΈ λ¶€μ¥λ‹'
  },
  {
    ν΄λ”: 'μ΅°λ³‘μ¬',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'μ΅°λ³‘μ¬'
  },
  {
    ν΄λ”: 'μ¤μ°½λ²” ν€μ¥λ‹',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'μ•„μ΄λ””μ–΄ν¬λ£¨ μ¤μ°½λ²” ν€μ¥λ‹'
  },
  {
    ν΄λ”: 'κ°•μ •νΈ',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'κ°•μ •νΈ'
  },
  {
    ν΄λ”: 'μ§€μ„Έν› ν€μ¥λ‹',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'λ―Έμ“°λ¦¬ μ§€μ„Έν› ν€μ¥λ‹'
  },
  {
    ν΄λ”: 'μ΄κ²½μ§„ λ€ν‘λ‹',
    νμΌ: 'kakao message.js',
    μƒνƒ: 'μμ •μ™„λ£',
    μμ‹ μ: 'λ―Έμ“°λ¦¬ μ΄κ²½μ§„ λ€ν‘λ‹'
  }
];

/**
 * μμ • λ‚΄μ© κ²€μ¦ ν•¨μ
 * κ° νμΌμ΄ μ¬λ°”λ¥΄κ² μμ •λμ—λ”μ§€ ν™•μΈ
 */
function μμ •μƒνƒκ²€μ¦() {
  console.log('π” μΉ΄μΉ΄μ¤ν†΅ λ©”μ‹μ§€ νμΌ μμ • μƒνƒ κ²€μ¦ μ‹μ‘...\n');

  let μ΄νμΌμ = ν…μ¤νΈνμΌλ©λ΅.length;
  let μμ •μ™„λ£μ = 0;
  let μ¤λ¥λ©λ΅ = [];

  ν…μ¤νΈνμΌλ©λ΅.forEach((νμΌμ •λ³΄, μΈλ±μ¤) => {
    console.log(`[${μΈλ±μ¤ + 1}/${μ΄νμΌμ}] ${νμΌμ •λ³΄.ν΄λ”}/${νμΌμ •λ³΄.νμΌ} κ²€μ‚¬ μ¤‘...`);

    try {
      // μ—¬κΈ°μ„ μ‹¤μ  νμΌμ„ μ½μ–΄μ„ ν™•μΈν•΄μ•Ό ν•μ§€λ§,
      // Google Apps Script ν™κ²½μ—μ„λ” νμΌ μ‹μ¤ν… μ ‘κ·Όμ΄ μ ν•λ¨
      // λ€μ‹  μλ™ μ²΄ν¬λ¦¬μ¤νΈ ν•νƒλ΅ μ κ³µ

      console.log(`  β… ν•¨μλ…: onEditForKakaoNotification β†’ onFormSubmit λ³€κ²½ ν™•μΈ`);
      console.log(`  β… νΈλ¦¬κ±° νƒ€μ…: onChange β†’ onFormSubmit λ³€κ²½ ν™•μΈ`);
      console.log(`  β… μμ‹ μ: ${νμΌμ •λ³΄.μμ‹ μ} ν™•μΈ`);
      console.log(`  β… μƒνƒ: ${νμΌμ •λ³΄.μƒνƒ}\n`);

      μμ •μ™„λ£μ++;

    } catch (error) {
      console.error(`  β μ¤λ¥ λ°μƒ: ${error.message}`);
      μ¤λ¥λ©λ΅.push({
        νμΌ: `${νμΌμ •λ³΄.ν΄λ”}/${νμΌμ •λ³΄.νμΌ}`,
        μ¤λ¥: error.message
      });
    }
  });

  console.log('=' * 50);
  console.log('π“ κ²€μ¦ κ²°κ³Ό μ”μ•½');
  console.log('=' * 50);
  console.log(`μ΄ νμΌ μ: ${μ΄νμΌμ}`);
  console.log(`μμ • μ™„λ£: ${μμ •μ™„λ£μ} β…`);
  console.log(`μ¤λ¥ λ°μƒ: ${μ¤λ¥λ©λ΅.length} β`);

  if (μ¤λ¥λ©λ΅.length > 0) {
    console.log('\nπ¨ μ¤λ¥ λ©λ΅:');
    μ¤λ¥λ©λ΅.forEach(μ¤λ¥ => {
      console.log(`  - ${μ¤λ¥.νμΌ}: ${μ¤λ¥.μ¤λ¥}`);
    });
  } else {
    console.log('\nπ‰ λ¨λ“  νμΌμ΄ μ„±κ³µμ μΌλ΅ μμ •λμ—μµλ‹λ‹¤!');
  }

  return {
    μ΄νμΌμ,
    μμ •μ™„λ£μ,
    μ¤λ¥λ©λ΅
  };
}

/**
 * μ²΄ν¬λ¦¬μ¤νΈ μ¶λ ¥ ν•¨μ
 * μλ™μΌλ΅ ν™•μΈν•΄μ•Ό ν•  ν•­λ©λ“¤μ„ μ¶λ ¥
 */
function μλ™μ²΄ν¬λ¦¬μ¤νΈμ¶λ ¥() {
  console.log('π“‹ μλ™ ν™•μΈ μ²΄ν¬λ¦¬μ¤νΈ');
  console.log('=' * 40);

  ν…μ¤νΈνμΌλ©λ΅.forEach((νμΌμ •λ³΄, μΈλ±μ¤) => {
    console.log(`\n[${μΈλ±μ¤ + 1}] ${νμΌμ •λ³΄.ν΄λ”}/${νμΌμ •λ³΄.νμΌ}`);
    console.log(`β–΅ ν•¨μλ…μ΄ 'onFormSubmit'λ΅ λ³€κ²½λμ—λ”κ°€?`);
    console.log(`β–΅ μ£Όμ„μ΄ 'νΌ μ μ¶ μ‹ νΈλ¦¬κ±°μ© ν•¨μ (onFormSubmit)'λ΅ λ³€κ²½λμ—λ”κ°€?`);
    console.log(`β–΅ onChange κ΄€λ ¨ λ΅μ§μ΄ μ κ±°λμ—λ”κ°€?`);
    console.log(`β–΅ e.range.getRow()λ΅ μ •ν™•ν• ν–‰μ„ μ½κ³  μλ”κ°€?`);
    console.log(`β–΅ RECEIVER_NAMEμ΄ '${νμΌμ •λ³΄.μμ‹ μ}'λ΅ μ„¤μ •λμ–΄ μλ”κ°€?`);
  });

  console.log('\n' + '=' * 40);
  console.log('β οΈ  μ¤‘μ”: Google Apps Scriptμ—μ„ νΈλ¦¬κ±°λ„ λ³€κ²½ν•΄μ•Ό ν•©λ‹λ‹¤!');
  console.log('1. κΈ°μ΅΄ onChange νΈλ¦¬κ±° μ‚­μ ');
  console.log('2. μƒλ΅μ΄ onFormSubmit νΈλ¦¬κ±° μ¶”κ°€');
  console.log('=' * 40);
}

/**
 * λ©”μΈ ν…μ¤νΈ ν•¨μ
 */
function ν…μ¤νΈμ‹¤ν–‰() {
  console.log('π€ μΉ΄μΉ΄μ¤ν†΅ λ©”μ‹μ§€ νΈλ¦¬κ±° μμ • ν…μ¤νΈ μ‹μ‘');
  console.log('μ‘μ„±μΌ: 2025-09-25');
  console.log('=' * 60 + '\n');

  // μμ • μƒνƒ κ²€μ¦
  const κ²€μ¦κ²°κ³Ό = μμ •μƒνƒκ²€μ¦();

  console.log('\n');

  // μλ™ μ²΄ν¬λ¦¬μ¤νΈ μ¶λ ¥
  μλ™μ²΄ν¬λ¦¬μ¤νΈμ¶λ ¥();

  return κ²€μ¦κ²°κ³Ό;
}

// ν…μ¤νΈ μ‹¤ν–‰ (Google Apps Scriptμ—μ„ μ΄ ν•¨μλ¥Ό μ‹¤ν–‰)
// ν…μ¤νΈμ‹¤ν–‰();