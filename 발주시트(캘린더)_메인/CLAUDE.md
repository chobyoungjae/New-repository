# CLAUDE.md

이 파일은 Claude Code (claude.ai/code)가 이 저장소에서 작업할 때 참고하는 가이드입니다.

## 프로젝트 개요

생산 일정 관리를 위한 구글 앱스 스크립트 프로젝트입니다. 구글 시트와 구글 캘린더 간의 양방향 동기화와 재고 알림을 위한 카카오톡 메시징을 처리합니다.

## 시스템 구조

### 핵심 구성요소

1. **스프레드시트_to_켈린더..js** - 메인 캘린더 동기화 모듈
   - 스프레드시트 데이터로 캘린더 일정 생성
   - 일정 상태 관리 (N, 등록완료, 삭제, 삭제완료)
   - 일정 색상 및 설명 지원

2. **캘린더_to_스프레드시트.js** - 역방향 동기화
   - 캘린더 변경사항을 스프레드시트에 반영
   - 일정 삭제 감지 및 정리
   - 시스템 간 데이터 일관성 유지

3. **안전재고 카톡보내기.js** - 메시징 및 모니터링 시스템
   - 재고 알림 카카오톡 발송
   - 대시보드 연동을 위한 트리거 로깅
   - ERP 연동 에러 처리

### 데이터 흐름

- **스프레드시트 → 캘린더**: 생산 데이터가 시트에서 캘린더 일정으로 흐름 (상태 추적 포함)
- **캘린더 → 스프레드시트**: 캘린더 수정사항이 일관성 유지를 위해 역동기화
- **메시징 시스템**: 재고 수준에 따른 카카오톡 API 자동 알림

### 주요 설정

- **캘린더 ID**: `bjcho9542@gmail.com` (생산 캘린더)
- **대시보드 연동**: 스프레드시트 ID `1YMH0u-NRghspwapeczB-siQPs022f3H2EFVp7tPX31s` 사용
- **타임존**: Asia/Seoul (appsscript.json에서 설정)
- **런타임**: V8 엔진

### 스프레드시트 스키마

- **A열**: 상태 (N, 등록완료, 삭제, 삭제완료)
- **B-C열**: 시작/종료 날짜
- **D-I열**: 제품 상세정보 (이름, 타입, 규격, 중량, 수량)
- **J열**: 캘린더 일정 색상 ID
- **K열**: 일정 설명
- **L열**: 일정 ID (추적용)

### 개발 참고사항

- 구글 앱스 스크립트 프로젝트 - 전통적인 빌드/테스트 명령어 없음
- 구글 앱스 스크립트 에디터를 통해 직접 배포
- 스프레드시트 메뉴 항목과 시간 기반 트리거로 함수 실행
- 에러 처리는 사용자 알림과 스프레드시트 셀 로깅 포함
- 카카오톡 연동은 UUID 시트에 저장된 유효한 OAuth 토큰 필요

### 메뉴 구조

스프레드시트에 "생산" 메뉴 추가:
- "스프레드시트 → 캘린더": 스프레드시트 데이터를 캘린더로 동기화
- "캘린더 → 스프레드시트": 캘린더 변경사항을 스프레드시트로 동기화

### 에러 처리

- 잘못된 캘린더 ID는 사용자 알림 표시
- 실패한 일정 작업은 상태 열 업데이트
- ERP 에러 감지 시 트리거 실행 방지
- 디버깅을 위한 포괄적 로깅